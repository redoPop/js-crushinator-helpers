!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.crushinator=e.crushinator||{})}(this,function(e){"use strict";function t(e){throw new Error(e)}function n(e){h&&"function"==typeof console.warn&&console.warn(e)}function o(e){var n=Number(e);return isFinite(n)||(t('"'+e+'" is not a finite number'),n=0),n}function r(e){return e.afterResize?"c":"precrop"}function a(e){var t=[];return t.push(o(e.width)),t.push(o(e.height)),(e.hasOwnProperty("x")||e.hasOwnProperty("y"))&&(t.push(o(e.x)),t.push(o(e.y))),t.join(",")}function i(e){return encodeURIComponent(e)}function c(e,t){var n=[];for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],a=t?t+"["+o+"]":o;n.push("object"===("undefined"==typeof r?"undefined":p["typeof"](r))?c(r,a):i(a)+"="+i(r))}return n.join("&")}function s(e){return e.replace(/.*\/\/([^\/]+).*/,"$1")}function u(e){return-1!==y.indexOf(s(e))}function f(e){var t=e.match(/(.+)?\/\/(?:img(?:-ssl)?\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return t?f(t[1]+"//"+t[2]):e}function d(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e=f(e),u(e)?("string"==typeof t&&n("Sending Crushinator options as a query string is deprecated. Please use the object format."),"object"===("undefined"==typeof t?"undefined":p["typeof"](t))&&(t=c(Object.assign(v.get(t),t.query||{}))),"https://tedcdnpi-a.akamaihd.net/r/"+e.replace(/.*\/\//,"")+(t?"?"+t:"")):e}var p={};p["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var h="object"===("undefined"==typeof console?"undefined":p["typeof"](console)),m=Object.freeze({param:r,filter:a}),l=function(){function e(t){p.classCallCheck(this,e),this.options=t}return p.createClass(e,[{key:"dehyphenate",value:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var o=e[n],r=n.match(/([^-]+)-+(.*)/);r&&this.options.hasOwnProperty(r[1])?(t[r[1]]=t[r[1]]||{},t[r[1]][r[2]]=o):t[n]=o}return t}},{key:"get",value:function(e){var t={};e=this.dehyphenate(e);for(var n in this.options)if(e.hasOwnProperty(n)){var o=this.options[n],r=e[n],a="function"==typeof o.param?o.param(r):o.param;t[a]=o.filter(r)}return t}}]),e}(),y=["assets.tedcdn.com","pb-assets.tedcdn.com","pe.tedcdn.com","assets2.tedcdn.com","tedcdnpf-a.akamaihd.net","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","images.ted.com","storage.ted.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","staging.ted.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","www.filepicker.io","ems.ted.com","ems-staging.ted.com"],v=new l({width:{param:"w",filter:o},height:{param:"h",filter:o},quality:{param:"quality",filter:o},crop:m});e.crushable=u,e.uncrush=f,e.crush=d,e["default"]=d});